server {
    listen 80;
    server_name _;

    root /var/www/public;
    index index.html index.htm;

    # Aplicação SPA (React build) - fallback sempre para index.html
    include /etc/nginx/include.d/spa.conf;

    # API e WebSocket para o backend
    location ~ ^/(api|socket\.io)/ {
        proxy_pass http://backend_upstream;
        include /etc/nginx/include.d/proxy.conf;
    }

    # SSL (opcional, se você tiver certificados montados)
    # include /etc/nginx/include.d/ssl-redirect.conf;
    # include /etc/nginx/include.d/ssl.conf;
}
